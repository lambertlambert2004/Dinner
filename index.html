<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>School Dinner Menu</title>
<link rel="apple-touch-icon" sizes="180x180" href="https://raw.githubusercontent.com/lambertlambert2004/Dinner/refs/heads/main/icon-180.PNG">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-title" content="School Dinner Menu">
<style>
:root{
  --bg:#f0f2f6;
  --card-green:#dfffe0;
  --card-packed:#fff4b2;
  --accent-blue:#4a90e2;
  --accent-orange:#ff9500;
  --text:#333;
}
body{
  margin:0;padding:20px;
  font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial;
  background:var(--bg); color:var(--text);
}
header{text-align:center;margin-bottom:12px;}
h1{margin:0 0 12px 0;font-size:1.4rem;font-weight:700;}
#packedBadge{
  display:block;margin:8px auto 0 auto;
  background:#4cd964;color:#fff;
  padding:6px 12px;border-radius:20px;
  font-size:0.9rem;font-weight:700;
  box-shadow:0 4px 12px rgba(76,217,100,0.3);
  width:max-content;
}
#weekInfo{margin-top:6px;font-size:0.95rem;color:#666;text-align:center;}
#menu{display:flex;flex-direction:column;gap:12px;max-width:820px;margin:18px auto 120px;}
.card{
  position:relative;border-radius:12px;padding:16px 16px 48px;
  box-shadow:0 6px 18px rgba(18,30,50,0.06);
  background:var(--card-green);
  transition:background .25s;
}
.card.packed{background:var(--card-packed);}
.dayTitle{font-size:1.05rem;font-weight:700;margin:0 0 8px 0;}
.menuText{white-space:pre-line;line-height:1.45;font-size:0.95rem;color:#3b3b3b;}
.dayLabel{
  position:absolute;top:12px;right:12px;
  padding:6px 8px;font-weight:700;font-size:0.75rem;color:#fff;
  border-radius:8px; z-index:3; pointer-events:none;
}
.dayLabel.today{background:var(--accent-blue); animation:glowBlue 2.6s infinite alternate;}
.dayLabel.tomorrow{background:var(--accent-orange); animation:glowOrange 2.8s infinite alternate;}
@keyframes glowBlue{
  0%{ box-shadow:0 0 6px rgba(74,144,226,0.6); }
  50%{ box-shadow:0 0 24px rgba(74,144,226,0.85); }
  100%{ box-shadow:0 0 12px rgba(74,144,226,0.7); }
}
@keyframes glowOrange{
  0%{ box-shadow:0 0 4px rgba(255,149,0,0.6); }
  50%{ box-shadow:0 0 18px rgba(255,149,0,0.8); }
  100%{ box-shadow:0 0 8px rgba(255,149,0,0.65); }
}
.toggle{position:absolute;right:12px;bottom:12px;width:56px;height:32px;}
.toggle input{opacity:0;width:0;height:0;}
.slider{
  position:relative;width:100%;height:100%;
  background:#bbb;border-radius:32px;border:1px solid #888;
  transition:background .2s;
}
.slider:before{
  content:""; position:absolute; left:4px; top:4px;
  width:24px; height:24px; background:#fff; border-radius:50%;
  box-shadow:0 2px 6px rgba(0,0,0,0.2);
  transition:transform .2s;
}
.toggle input:checked + .slider{ background:#4cd964; border-color:#3ac05a; }
.toggle input:checked + .slider:before{ transform:translateX(24px); }

#weekNav{
  position:fixed;
  bottom:28px;
  right:18px;
  z-index:50;
  display:flex; flex-direction:column; gap:8px;
}
.btn{
  border:0; padding:14px 22px; border-radius:28px;
  font-weight:600; font-size:0.95rem; cursor:pointer;
  box-shadow:0 8px 20px rgba(0,0,0,0.15);
  transition:transform 0.25s, box-shadow 0.25s;
  color:#fff;
}
.btn.floating{
  background:linear-gradient(135deg,#4a90e2,#357ABD);
}
.btn.floating:hover{
  transform:translateY(-2px);
  box-shadow:0 12px 24px rgba(74,144,226,0.35);
}
.btn.floating:active{
  transform:translateY(0);
  box-shadow:0 6px 14px rgba(74,144,226,0.25);
}
.btn.secondary{
  background:linear-gradient(135deg,#ff6b6b,#e55050);
  box-shadow:0 6px 14px rgba(255,107,107,0.25);
}
</style>
</head>
<body>

<header>
  <h1>School Dinner Menu</h1>
  <div id="packedBadge">Packed Meals: 0</div>
  <div id="weekInfo">Week <span id="weekNumber">—</span> · Week commencing <span id="weekCommence">—</span></div>
</header>

<main id="menu"></main>
<div id="weekNav">
  <button id="nextWeekBtn" class="btn floating">Next Week (Week <span id="nextWeekNum">—</span>)</button>
</div>

<script>
// WEEK DATA
const weekMap=[
  {week:1,start:"2025-09-01"},
  {week:2,start:"2025-09-08"},
  {week:3,start:"2025-09-15"}
];

// MENUS placeholder (leave meals as they are)
const MENUS={1:{Monday:"",Tuesday:"",Wednesday:"",Thursday:"",Friday:""},2:{Monday:"",Tuesday:"",Wednesday:"",Thursday:"",Friday:""},3:{Monday:"",Tuesday:"",Wednesday:"",Thursday:"",Friday:""}};

// Packed lunches
let packedLunch=JSON.parse(localStorage.getItem('packedLunch')||'{}');

// Get current week
function getCurrentWeek(today=new Date()){
  today.setHours(0,0,0,0);
  let current=null;
  for(let i=weekMap.length-1;i>=0;i--){
    const startDate=new Date(weekMap[i].start);
    if(today>=startDate){ current=weekMap[i].week; break; }
  }
  if(today.getDay()===0){
    const nextWeek=weekMap.find(w=>w.week===current+1);
    if(nextWeek) current=nextWeek.week;
  }
  return current || 1;
}

// Render badge
function renderBadge(week){
  const badge=document.getElementById('packedBadge');
  let count=0;
  for(const day in packedLunch) if(MENUS[week][day]) count++;
  badge.textContent="Packed Meals: "+count;
}

// Render menu
const menuContainer=document.getElementById('menu');
function renderMenu(week){
  menuContainer.innerHTML='';
  const weekdays=["Monday","Tuesday","Wednesday","Thursday","Friday"];
  const todayDate=new Date(); todayDate.setHours(0,0,0,0);
  const tomorrowDate=new Date(todayDate); tomorrowDate.setDate(todayDate.getDate()+1);

  const weekMenus=MENUS[week];
  weekdays.forEach((day,i)=>{
    const card=document.createElement("div"); card.className="card";
    if(packedLunch[day]) card.classList.add("packed");

    const dayTitle=document.createElement("div"); dayTitle.className="dayTitle"; dayTitle.textContent=day;
    card.appendChild(dayTitle);

    const menuText=document.createElement("div"); menuText.className="menuText"; menuText.textContent=weekMenus[day];
    card.appendChild(menuText);

    const label=document.createElement("span"); label.className="dayLabel";
    const mondayDate=new Date(todayDate); mondayDate.setDate(todayDate.getDate() - todayDate.getDay() +1);
    const dayDate=new Date(mondayDate); dayDate.setDate(mondayDate.getDate()+i);
    if(dayDate.toDateString()===todayDate.toDateString()) label.textContent="Today", label.classList.add("today");
    else if(dayDate.toDateString()===tomorrowDate.toDateString()) label.textContent="Tomorrow", label.classList.add("tomorrow");
    card.appendChild(label);

    const toggle=document.createElement("label"); toggle.className="toggle";
    const input=document.createElement("input"); input.type="checkbox"; input.checked=!!packedLunch[day];
    const slider=document.createElement("span"); slider.className="slider";
    toggle.appendChild(input); toggle.appendChild(slider);
    card.appendChild(toggle);

    input.addEventListener("change",()=>{
      if(input.checked) packedLunch[day]=true; else delete packedLunch[day];
      localStorage.setItem('packedLunch',JSON.stringify(packedLunch));
      renderBadge(week);
      card.classList.toggle("packed",input.checked);
    });

    menuContainer.appendChild(card);
  });

  document.getElementById('weekNumber').textContent=week;
  const startDate=weekMap.find(w=>w.week===week).start;
  document.getElementById('weekCommence').textContent=new Date(startDate).toLocaleDateString('en-GB',{day:'numeric',month:'short',year:'numeric'});
  renderBadge(week);
}

// Initialize
let currentWeek=getCurrentWeek();
renderMenu(currentWeek);

// Week navigation buttons
const nextWeekBtn=document.getElementById("nextWeekBtn");
const nextWeekNum=document.getElementById("nextWeekNum");
nextWeekNum.textContent = currentWeek+1 <= weekMap.length ? currentWeek+1 : "-";

nextWeekBtn.addEventListener("click",()=>{
  const nextWeek=currentWeek+1;
  if(!MENUS[nextWeek]) return;
  renderMenu(nextWeek);
  nextWeekBtn.style.display="none";

  if(!document.getElementById('returnBtn')){
    const returnBtn=document.createElement("button");
    returnBtn.id="returnBtn";
    returnBtn.className="btn secondary floating";
    returnBtn.textContent="Return to Current Week";
    document.getElementById('weekNav').appendChild(returnBtn);

    returnBtn.addEventListener("click",()=>{
      renderMenu(currentWeek);
      nextWeekBtn.style.display="block";
      returnBtn.remove();
    });
  }
});
</script>
</body>
</html>
