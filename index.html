<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Tomorrow's Lunch — Swansea Primary Menu 2025</title>
<style>
  body {
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
    margin:0; padding:20px; background:#f7f7f7;
  }
  h1 { text-align:center; margin-bottom:20px; }
  table {
    width:100%; border-collapse: collapse; box-shadow:0 2px 8px rgba(0,0,0,0.1);
  }
  td {
    padding:12px; border:1px solid #ddd; text-align:left; vertical-align:top;
  }
  td.other-day { background:#dfffe0; }
  td.packed { background:#fff4b2; }
  td.tomorrow { border:3px solid #ffd1d1; }
  .checkbox { margin-top:5px; }
  @media(max-width:600px) {
    table, tbody, td, tr { display:block; }
    tr { margin-bottom:10px; border-bottom:2px solid #ccc; }
    td { border:none; padding:8px 4px; }
    td.tomorrow { border:3px solid #ffd1d1; }
  }
  footer { margin-top:20px; text-align:center; font-size:.85rem; color:#555; }
</style>
</head>
<body>
<h1>Primary School Menu — Full Week</h1>
<table id="menuTable">
  <tbody></tbody>
</table>
<footer>Baked salmon available every Friday as an alternative. Data last updated per Swansea Council 2025.</footer>

<script>
// Hard-coded menus (update each term)
const MENUS = {
  Monday: "Oven baked sausages / Vegetarian sausage\nAccompaniments\nFruit / Biscuit",
  Tuesday: "BBQ chicken wrap / Cheese and tomato pizza\nAccompaniments\nFruit yoghurt / Fresh fruit",
  Wednesday: "Cheesy beany jacket / Breaded chicken steak\nAccompaniments\nPancake and fruit",
  Thursday: "Cottage pie / Tomato pasta bake\nAccompaniments\nCookie / Fresh fruit",
  Friday: "Baked fish / Cheese wrap\nAccompaniments\nJam split and fruit wedge"
};

// Determine tomorrow, skip weekends
let tomorrow = new Date();
tomorrow.setDate(tomorrow.getDate()+1);
if(tomorrow.getDay()===6) tomorrow.setDate(tomorrow.getDate()+2); // Sat -> Mon
if(tomorrow.getDay()===0) tomorrow.setDate(tomorrow.getDate()+1); // Sun -> Mon

const weekdays = ["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];
const tomorrowName = weekdays[tomorrow.getDay()];

// Load saved packed lunch selections from localStorage
let packedLunch = JSON.parse(localStorage.getItem('packedLunch') || '{}');

const tbody = document.querySelector("#menuTable tbody");
for(const day of ["Monday","Tuesday","Wednesday","Thursday","Friday"]){
  const tr = document.createElement("tr");
  
  const tdDay = document.createElement("td");
  tdDay.textContent = day;
  
  const tdMenu = document.createElement("td");
  tdMenu.textContent = MENUS[day] || "No data";

  // Pink border for tomorrow (applied only to menu cell)
  if(day===tomorrowName){
    tdMenu.classList.add("tomorrow");
  }

  // Set default colors or packed lunch
  if(packedLunch[day]){
    tdDay.classList.add("packed");
    tdMenu.classList.add("packed");
  } else if(day!==tomorrowName){
    tdDay.classList.add("other-day");
    tdMenu.classList.add("other-day");
  }

  // Checkbox with confirmation
  const tdCheck = document.createElement("td");
  const checkbox = document.createElement("input");
  checkbox.type = "checkbox";
  checkbox.classList.add("checkbox");
  checkbox.checked = !!packedLunch[day];
  checkbox.addEventListener("click", (e)=>{
    e.preventDefault(); // prevent instant toggle
    const action = checkbox.checked ? "remove packed lunch for" : "add packed lunch for";
    if(confirm(`Are you sure you want to ${action} ${day}?`)){
      checkbox.checked = !checkbox.checked; // toggle after confirmation
      if(checkbox.checked){
        tdDay.classList.remove("other-day");
        tdMenu.classList.remove("other-day");
        tdDay.classList.add("packed");
        tdMenu.classList.add("packed");
        packedLunch[day]=true;
      } else {
        tdDay.classList.remove("packed");
        tdMenu.classList.remove("packed");
        tdDay.classList.add("other-day");
        tdMenu.classList.add("other-day");
        delete packedLunch[day];
      }
      // Ensure tomorrow keeps pink border
      if(day===tomorrowName){
        tdMenu.classList.add("tomorrow");
      }
      localStorage.setItem('packedLunch', JSON.stringify(packedLunch));
    }
  });
  tdCheck.appendChild(checkbox);

  tr.appendChild(tdDay);
  tr.appendChild(tdMenu);
  tr.appendChild(tdCheck);
  tbody.appendChild(tr);
}
</script>
</body>
</html>
