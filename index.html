<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>School Dinner Menu</title>
<link rel="apple-touch-icon" sizes="180x180" href="https://raw.githubusercontent.com/lambertlambert2004/Dinner/refs/heads/main/icon-180.PNG">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-title" content="School Dinner Menu">
<style>
:root{
  --bg:#f0f2f6;
  --card-green:#dfffe0;
  --card-packed:#fff4b2;
  --accent-blue:#4a90e2;
  --accent-orange:#ff9500;
  --text:#333;
}
body{
  margin:0;padding:20px;
  font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial;
  background:var(--bg); color:var(--text);
}
header{text-align:center;margin-bottom:6px;}
h1{margin:0 0 6px 0;font-size:1.4rem;font-weight:700;}
#packedBadge{margin:0 auto 6px auto;text-align:center;font-weight:700;font-size:0.9rem;color:#333;}
#weekInfo{font-size:0.95rem;color:#666;margin-bottom:12px;}
#menu{display:flex;flex-direction:column;gap:12px;max-width:820px;margin:0 auto 120px;}
.card{
  position:relative;border-radius:12px;padding:16px 16px 48px;
  box-shadow:0 6px 18px rgba(18,30,50,0.06);
  background:var(--card-green);
  transition:background .25s;
}
.card.packed{background:var(--card-packed);}
.dayTitle{font-size:1.05rem;font-weight:700;margin:0 0 8px 0;}
.menuText{white-space:pre-line;line-height:1.45;font-size:0.95rem;color:#3b3b3b;}
.dayLabel{
  position:absolute;top:12px;right:12px;
  padding:6px 8px;font-weight:700;font-size:0.75rem;color:#fff;
  border-radius:8px; z-index:3; pointer-events:none;
}
.dayLabel.today{background:var(--accent-blue); animation:glowBlue 2.6s infinite alternate;}
.dayLabel.tomorrow{background:var(--accent-orange); animation:glowOrange 2.8s infinite alternate;}
@keyframes glowBlue{
  0%{ box-shadow:0 0 6px rgba(74,144,226,0.6); }
  50%{ box-shadow:0 0 24px rgba(74,144,226,0.85); }
  100%{ box-shadow:0 0 12px rgba(74,144,226,0.7); }
}
@keyframes glowOrange{
  0%{ box-shadow:0 0 4px rgba(255,149,0,0.6); }
  50%{ box-shadow:0 0 18px rgba(255,149,0,0.8); }
  100%{ box-shadow:0 0 8px rgba(255,149,0,0.65); }
}
.toggle{position:absolute;right:12px;bottom:12px;width:56px;height:32px;}
.toggle input{opacity:0;width:0;height:0;}
.slider{
  position:relative;width:100%;height:100%;
  background:#bbb;border-radius:32px;border:1px solid #888;
  transition:background .2s;
}
.slider:before{
  content:""; position:absolute; left:4px; top:4px;
  width:24px; height:24px; background:#fff; border-radius:50%;
  box-shadow:0 2px 6px rgba(0,0,0,0.2);
  transition:transform .2s;
}
.toggle input:checked + .slider{ background:#4cd964; border-color:#3ac05a; }
.toggle input:checked + .slider:before{ transform:translateX(24px); }
#weekNav{ position:fixed; right:18px; bottom:60px; z-index:50; display:flex; flex-direction:column; gap:6px; }
.btn{
  background:linear-gradient(135deg,var(--accent-blue),#357ABD);
  color:#fff; border:0; padding:12px 18px;
  border-radius:20px; font-weight:600; font-size:0.9rem;
  box-shadow:0 6px 14px rgba(74,144,226,0.25);
}
.btn.secondary{
  background:linear-gradient(135deg,#ff6b6b,#e55050);
  box-shadow:0 6px 14px rgba(255,107,107,0.25);
}
</style>
</head>
<body>

<header>
  <h1>School Dinner Menu</h1>
  <div id="packedBadge">Packed Meals This Week: 0</div>
  <div id="weekInfo">Week <span id="weekNumber">—</span> · Week commencing <span id="weekCommence">—</span></div>
</header>

<main id="menu"></main>
<div id="weekNav"></div>

<script>
// Week data
const weekMap=[
  {week:1,start:"2025-09-01"},
  {week:2,start:"2025-09-08"},
  {week:3,start:"2025-09-15"}
];

// MENUS (example, replace with verified council data)
const MENUS={
  1:{
    Monday:"Oven baked sausages / Vegetarian sausage\nAccompaniments\nFruit / Biscuit",
    Tuesday:"BBQ chicken wrap / Cheese and tomato pizza\nAccompaniments\nFruit yoghurt / Fresh fruit",
    Wednesday:"Cheesy beany jacket / Breaded chicken steak\nAccompaniments\nPancake and fruit",
    Thursday:"Cottage pie / Tomato pasta bake\nAccompaniments\nCookie / Fresh fruit",
    Friday:"Baked fish / Cheese wrap\nAccompaniments\nJam split and fruit wedge"
  },
  2:{
    Monday:"Breaded chicken steak / Vegetable cheese bake\nAccompaniments of the day\nFruit yoghurt pot / fresh fruit",
    Tuesday:"Pasta bolognese / Cheese & tomato pizza\nAccompaniments\nFruit / Biscuit",
    Wednesday:"Chicken curry / Quorn curry\nAccompaniments\nRice / Vegetable\nFruit",
    Thursday:"Cottage pie / Macaroni cheese\nAccompaniments\nCookie / Fresh fruit",
    Friday:"Baked salmon / Cheese wrap\nAccompaniments\nJam split / Fruit wedge"
  },
  3:{
    Monday:"Oven baked sausages / Vegetable hotdog\nAccompaniments\nFruit / Biscuit",
    Tuesday:"Chicken curry / Quorn curry\nAccompaniments\nRice / Vegetable\nFruit",
    Wednesday:"Cheesy beany jacket / Breaded chicken steak\nAccompaniments\nPancake and fruit",
    Thursday:"Cottage pie / Tomato pasta bake\nAccompaniments\nCookie / Fresh fruit",
    Friday:"Baked fish / Cheese wrap\nAccompaniments\nJam split and fruit wedge"
  }
};

// Get current week
function getCurrentWeek(today=new Date()){
  today.setHours(0,0,0,0);
  let current=null;
  for(let i=weekMap.length-1;i>=0;i--){
    let startDate=new Date(weekMap[i].start);
    if(today>=startDate){ current=weekMap[i].week; break; }
  }
  if(today.getDay()===0){ // Sunday -> show next week
    const nextWeek=weekMap.find(w=>w.week===current+1);
    if(nextWeek) current=nextWeek.week;
  }
  return current||1;
}

// Load packed lunches per week
let packedLunches=JSON.parse(localStorage.getItem('packedLunches')||'{}');

let currentWeek=getCurrentWeek();
let viewingWeek=currentWeek;

function renderBadge(){
  const badge=document.getElementById('packedBadge');
  const weekData=packedLunches[viewingWeek]||{};
  const count=Object.keys(weekData).filter(d=>weekData[d]).length;
  badge.textContent="Packed Meals This Week: "+count;
}

function renderMenu(week){
  viewingWeek=week;
  const menuContainer=document.getElementById('menu');
  menuContainer.innerHTML='';

  const weekMenus=MENUS[week];
  const today=new Date();
  const tomorrow=new Date(today); tomorrow.setDate(today.getDate()+1);

  for(const day of ["Monday","Tuesday","Wednesday","Thursday","Friday"]){
    const card=document.createElement("div");
    card.className="card";
    if(packedLunches[week] && packedLunches[week][day]) card.classList.add("packed");

    const dayTitle=document.createElement("div");
    dayTitle.className="dayTitle"; dayTitle.textContent=day;
    card.appendChild(dayTitle);

    const menuText=document.createElement("div");
    menuText.className="menuText"; menuText.textContent=weekMenus[day];
    card.appendChild(menuText);

    // Label
    const labelSpan=document.createElement("span"); labelSpan.className="dayLabel";
    const dayIndex=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"].indexOf(day);
    const dayDate=new Date(today); dayDate.setDate(today.getDate() + ((dayIndex - today.getDay()+7)%7));
    if(dayDate.toDateString()===today.toDateString()){labelSpan.textContent="Today"; labelSpan.classList.add("today");}
    else if(dayDate.toDateString()===tomorrow.toDateString()){labelSpan.textContent="Tomorrow"; labelSpan.classList.add("tomorrow");}
    card.appendChild(labelSpan);

    // Toggle
    const toggle=document.createElement("label"); toggle.className="toggle";
    const input=document.createElement("input"); input.type="checkbox";
    if(packedLunches[week] && packedLunches[week][day]) input.checked=true;
    const slider=document.createElement("span"); slider.className="slider";
    toggle.appendChild(input); toggle.appendChild(slider);
    card.appendChild(toggle);

    input.addEventListener("change",()=>{
      if(!packedLunches[week]) packedLunches[week]={};
      packedLunches[week][day]=input.checked;
      if(!input.checked) delete packedLunches[week][day];
      localStorage.setItem('packedLunches',JSON.stringify(packedLunches));
      renderBadge();
      if(input.checked) card.classList.add("packed"); else card.classList.remove("packed");
    });

    menuContainer.appendChild(card);
  }

  // Week info
  const weekNumber=document.getElementById('weekNumber'); weekNumber.textContent=week;
  const weekCommence=document.getElementById('weekCommence');
  const startDate=weekMap.find(w=>w.week===week).start;
  weekCommence.textContent=new Date(startDate).toLocaleDateString('en-GB',{day:'numeric',month:'short',year:'numeric'});

  // Update buttons
  updateWeekNav();
}

function updateWeekNav(){
  const weekNav=document.getElementById('weekNav');
  weekNav.innerHTML='';
  if(viewingWeek!==currentWeek){
    const returnBtn=document.createElement("button"); returnBtn.className="btn secondary"; returnBtn.textContent="Return to Current Week";
    returnBtn.addEventListener("click",()=>{renderMenu(currentWeek);});
    weekNav.appendChild(returnBtn);
  }
  if(MENUS[viewingWeek+1]){
    const nextBtn=document.createElement("button"); nextBtn.className="btn"; nextBtn.textContent="View Next Week";
    nextBtn.addEventListener("click",()=>{renderMenu(viewingWeek+1);});
    weekNav.appendChild(nextBtn);
  }
  if(MENUS[viewingWeek-1]){
    const prevBtn=document.createElement("button"); prevBtn.className="btn"; prevBtn.textContent="View Previous Week";
    prevBtn.addEventListener("click",()=>{renderMenu(viewingWeek-1);});
    weekNav.appendChild(prevBtn);
  }
}

// Swipe gestures
let touchStartX=0;
let touchEndX=0;
document.addEventListener('touchstart',e=>{touchStartX=e.changedTouches[0].screenX;});
document.addEventListener('touchend',e=>{
  touchEndX=e.changedTouches[0].screenX;
  if(touchEndX-touchStartX>50 && MENUS[viewingWeek-1]) renderMenu(viewingWeek-1); // swipe right
  else if(touchStartX-touchEndX>50 && MENUS[viewingWeek+1]) renderMenu(viewingWeek+1); // swipe left
});

// Initial render
renderMenu(currentWeek);
renderBadge();
</script>
</body>
</html>
