<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Tomorrow's Lunch — Swansea Primary Menu 2025</title>
<style>
  body {
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
    margin:0; padding:20px; background:#f7f7f7;
  }
  h1 { text-align:center; margin-bottom:20px; }
  table {
    width:100%; border-collapse: collapse; box-shadow:0 2px 8px rgba(0,0,0,0.1);
  }
  td {
    padding:12px; border:1px solid #ddd; text-align:left; vertical-align:top;
    position: relative;
  }
  tr.other-day td { background:#dfffe0; }
  tr.packed td { background:#fff4b2; }
  tr.tomorrow { border:3px solid #ffd1d1; }
  .label {
    position: absolute;
    top:2px;
    right:5px;
    font-size:0.75rem;
    font-weight:bold;
    color:#fff;
    padding:2px 5px;
    border-radius:4px;
  }
  .label.today { background:#4a90e2; }
  .label.tomorrow { background:#ff6b6b; }
  .toggle {
    position: relative;
    display: inline-block;
    width: 50px;
    height: 28px;
  }
  .toggle input {
    opacity: 0;
    width: 0;
    height: 0;
  }
  .slider {
    position: absolute;
    cursor: pointer;
    top:0;
    left:0;
    right:0;
    bottom:0;
    background-color: #ccc;
    transition: .4s;
    border-radius: 28px;
  }
  .slider:before {
    position: absolute;
    content: "";
    height: 22px;
    width: 22px;
    left: 3px;
    bottom: 3px;
    background-color: white;
    transition: .4s;
    border-radius: 50%;
  }
  input:checked + .slider {
    background-color: #4cd964;
  }
  input:checked + .slider:before {
    transform: translateX(22px);
  }
  @media(max-width:600px) {
    table, tbody, td, tr { display:block; }
    tr { margin-bottom:10px; border-bottom:2px solid #ccc; }
    td { border:none; padding:8px 4px; }
    tr.tomorrow { border:3px solid #ffd1d1; padding:2px; }
  }
  footer { margin-top:20px; text-align:center; font-size:.85rem; color:#555; }
</style>
</head>
<body>
<h1>Primary School Menu — Full Week</h1>
<table id="menuTable">
  <tbody></tbody>
</table>
<footer>Baked salmon available every Friday as an alternative. Data last updated per Swansea Council 2025.</footer>

<script>
// Menus (update each term)
const MENUS = {
  Monday: "Oven baked sausages / Vegetarian sausage\nAccompaniments\nFruit / Biscuit",
  Tuesday: "BBQ chicken wrap / Cheese and tomato pizza\nAccompaniments\nFruit yoghurt / Fresh fruit",
  Wednesday: "Cheesy beany jacket / Breaded chicken steak\nAccompaniments\nPancake and fruit",
  Thursday: "Cottage pie / Tomato pasta bake\nAccompaniments\nCookie / Fresh fruit",
  Friday: "Baked fish / Cheese wrap\nAccompaniments\nJam split and fruit wedge"
};

// Determine today and tomorrow
let today = new Date();
const weekdays = ["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];
const todayName = weekdays[today.getDay()];

let tomorrow = new Date();
tomorrow.setDate(tomorrow.getDate()+1);
if(tomorrow.getDay()===6) tomorrow.setDate(tomorrow.getDate()+2);
if(tomorrow.getDay()===0) tomorrow.setDate(tomorrow.getDate()+1);
const tomorrowName = weekdays[tomorrow.getDay()];

// Load saved packed lunch selections
let packedLunch = JSON.parse(localStorage.getItem('packedLunch') || '{}');

const tbody = document.querySelector("#menuTable tbody");

["Monday","Tuesday","Wednesday","Thursday","Friday"].forEach(day => {
  const tr = document.createElement("tr");

  const tdDay = document.createElement("td");
  tdDay.textContent = day;

  const tdMenu = document.createElement("td");
  tdMenu.textContent = MENUS[day] || "No data";

  // Add Today/Tomorrow label
  const labelSpan = document.createElement("span");
  if(day === todayName){
    labelSpan.textContent = "Today";
    labelSpan.classList.add("label","today");
  } else if(day === tomorrowName){
    labelSpan.textContent = "Tomorrow";
    labelSpan.classList.add("label","tomorrow");
  }
  tdMenu.appendChild(labelSpan);

  const tdToggle = document.createElement("td");
  const label = document.createElement("label");
  label.classList.add("toggle");
  const input = document.createElement("input");
  input.type = "checkbox";
  input.checked = !!packedLunch[day];
  const slider = document.createElement("span");
  slider.classList.add("slider");
  label.appendChild(input);
  label.appendChild(slider);
  tdToggle.appendChild(label);

  tr.appendChild(tdDay);
  tr.appendChild(tdMenu);
  tr.appendChild(tdToggle);

  // Background colors
  if(packedLunch[day]){
    tr.classList.add("packed");
  } else {
    tr.classList.add("other-day");
  }

  // Pink border for tomorrow
  if(day === tomorrowName){
    tr.classList.add("tomorrow");
  }

  // Toggle confirmation
  input.addEventListener("click", e => {
    e.preventDefault();
    const isPacked = tr.classList.contains("packed");
    const action = isPacked ? "remove packed lunch for" : "add packed lunch for";
    if(confirm(`Are you sure you want to ${action} ${day}?`)){
      if(isPacked){
        tr.classList.remove("packed");
        tr.classList.add("other-day");
        delete packedLunch[day];
        input.checked = false;
      } else {
        tr.classList.remove("other-day");
        tr.classList.add("packed");
        packedLunch[day] = true;
        input.checked = true;
      }
      localStorage.setItem('packedLunch', JSON.stringify(packedLunch));
    }
  });

  tbody.appendChild(tr);
});
</script>
</body>
</html>
