<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>School Dinner Menu</title>
<link rel="apple-touch-icon" sizes="180x180" href="https://raw.githubusercontent.com/lambertlambert2004/Dinner/refs/heads/main/icon-180.PNG">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-title" content="School Dinner Menu">
<style>
:root{
  --bg:#f0f2f6;
  --card-green:#dfffe0;
  --card-packed:#fff4b2;
  --accent-blue:#4a90e2;
  --accent-orange:#ff9500;
  --text:#333;
}
body{
  margin:0;padding:20px;
  font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial;
  background:var(--bg); color:var(--text);
}
header{text-align:center;margin-bottom:12px;}
h1{margin:0 0 6px 0;font-size:1.5rem;font-weight:700;}
#weekInfo{margin-top:6px;font-size:0.95rem;color:#666;}
#packedWeek{margin-top:6px;font-size:0.95rem;color:#333;font-weight:600;}
#menu{display:flex;flex-direction:column;gap:12px;max-width:820px;margin:18px auto 140px;}
.card{
  position:relative;border-radius:12px;padding:16px 16px 48px;
  box-shadow:0 6px 18px rgba(18,30,50,0.06);
  background:var(--card-green);
  transition:background .25s;
}
.card.packed{background:var(--card-packed);}
.dayTitle{font-size:1.05rem;font-weight:700;margin:0 0 8px 0;}
.menuText{white-space:pre-line;line-height:1.45;font-size:0.95rem;color:#3b3b3b;}
.dayLabel{
  position:absolute;top:12px;right:12px;
  padding:6px 8px;font-weight:700;font-size:0.75rem;color:#fff;
  border-radius:8px; z-index:3; pointer-events:none;
}
.dayLabel.today{background:var(--accent-blue); animation:glowBlue 2.6s infinite alternate;}
.dayLabel.tomorrow{background:var(--accent-orange); animation:glowOrange 2.8s infinite alternate;}
@keyframes glowBlue{
  0%{ box-shadow:0 0 6px rgba(74,144,226,0.6); }
  50%{ box-shadow:0 0 24px rgba(74,144,226,0.85); }
  100%{ box-shadow:0 0 12px rgba(74,144,226,0.7); }
}
@keyframes glowOrange{
  0%{ box-shadow:0 0 4px rgba(255,149,0,0.6); }
  50%{ box-shadow:0 0 18px rgba(255,149,0,0.8); }
  100%{ box-shadow:0 0 8px rgba(255,149,0,0.65); }
}
.toggle{position:absolute;right:12px;bottom:12px;width:56px;height:32px;}
.toggle input{opacity:0;width:0;height:0;}
.slider{
  position:relative;width:100%;height:100%;
  background:#bbb;border-radius:32px;border:1px solid #888;
  transition:background .2s;
}
.slider:before{
  content:""; position:absolute; left:4px; top:4px;
  width:24px; height:24px; background:#fff; border-radius:50%;
  box-shadow:0 2px 6px rgba(0,0,0,0.2);
  transition:transform .2s;
}
.toggle input:checked + .slider{ background:#4cd964; border-color:#3ac05a; }
.toggle input:checked + .slider:before{ transform:translateX(24px); }
#weekNav{ position:fixed; right:18px; bottom:60px; z-index:50; display:flex; flex-direction:column; gap:8px; }
.btn{
  background:linear-gradient(135deg,var(--accent-blue),#357ABD);
  color:#fff; border:0; padding:12px 18px;
  border-radius:20px; font-weight:600; font-size:0.9rem;
  box-shadow:0 6px 14px rgba(74,144,226,0.25);
}
.btn.secondary{
  background:linear-gradient(135deg,#ff6b6b,#e55050);
  box-shadow:0 6px 14px rgba(255,107,107,0.25);
}
#packedBadge{
  position:fixed; top:60px; left:50%; transform:translateX(-50%);
  background:#4cd964; color:#fff; padding:4px 10px;
  border-radius:16px; font-size:0.8rem; font-weight:700;
  box-shadow:0 4px 12px rgba(76,217,100,0.3);
  z-index:60;
}
</style>
</head>
<body>
<div id="packedBadge">Packed Meals: 0</div>
<header>
  <h1>School Dinner Menu</h1>
  <div id="weekInfo">Week <span id="weekNumber">—</span> · Week commencing <span id="weekCommence">—</span></div>
  <div id="packedWeek"></div>
</header>
<main id="menu"></main>
<div id="weekNav"></div>
<script>
// Term dates
const termStart = new Date("2025-09-01");
const termEnd = new Date("2025-12-20");

// MENUS (replace with verified council data)
const MENUS={
  1:{Monday:"Oven baked sausages / Vegetarian sausage\nAccompaniments\nFruit / Biscuit",
     Tuesday:"BBQ chicken wrap / Cheese and tomato pizza\nAccompaniments\nFruit yoghurt / Fresh fruit",
     Wednesday:"Cheesy beany jacket / Breaded chicken steak\nAccompaniments\nPancake and fruit",
     Thursday:"Cottage pie / Tomato pasta bake\nAccompaniments\nCookie / Fresh fruit",
     Friday:"Baked fish / Cheese wrap\nAccompaniments\nJam split and fruit wedge"},
  2:{Monday:"Breaded chicken steak / Vegetable cheese bake\nAccompaniments of the day\nFruit yoghurt pot / fresh fruit",
     Tuesday:"Pasta bolognese / Cheese & tomato pizza\nAccompaniments\nFruit / Biscuit",
     Wednesday:"Chicken curry / Quorn curry\nAccompaniments\nRice / Vegetable\nFruit",
     Thursday:"Cottage pie / Macaroni cheese\nAccompaniments\nCookie / Fresh fruit",
     Friday:"Baked salmon / Cheese wrap\nAccompaniments\nJam split / Fruit wedge"},
  3:{Monday:"Oven baked sausages / Vegetable hotdog\nAccompaniments\nFruit / Biscuit",
     Tuesday:"Chicken curry / Quorn curry\nAccompaniments\nRice / Vegetable\nFruit",
     Wednesday:"Cheesy beany jacket / Breaded chicken steak\nAccompaniments\nPancake and fruit",
     Thursday:"Cottage pie / Tomato pasta bake\nAccompaniments\nCookie / Fresh fruit",
     Friday:"Baked fish / Cheese wrap\nAccompaniments\nJam split and fruit wedge"}
};

// Packed lunches per week
let packedLunches = JSON.parse(localStorage.getItem('packedLunches')||'{}');

// Calculate current week dynamically
function getCurrentWeek(today=new Date()){
  today.setHours(0,0,0,0);
  const diffDays = Math.floor((today - termStart)/(1000*60*60*24));
  let week = Math.floor(diffDays/7)+1;
  const totalWeeks = Math.ceil((termEnd - termStart)/(1000*60*60*24*7));
  if(week<1) week=1;
  if(week>totalWeeks) week=totalWeeks;
  // Sunday logic: show next week
  if(today.getDay()===0) week = Math.min(week+1,totalWeeks);
  return week;
}

// Render menu
const menuContainer = document.getElementById('menu');
const weekNumberEl = document.getElementById('weekNumber');
const weekCommenceEl = document.getElementById('weekCommence');
const packedBadge = document.getElementById('packedBadge');
const packedWeekEl = document.getElementById('packedWeek');
let currentWeek = getCurrentWeek();

function renderMenu(week){
  menuContainer.innerHTML='';
  const today = new Date();
  const tomorrow = new Date(today); tomorrow.setDate(today.getDate()+1);
  const weekMenus = MENUS[week] || {};
  let packedCount=0;

  for(const day of ["Monday","Tuesday","Wednesday","Thursday","Friday"]){
    const card=document.createElement("div"); card.className="card";
    if(packedLunches[week] && packedLunches[week][day]) card.classList.add("packed");

    const dayTitle=document.createElement("div"); dayTitle.className="dayTitle"; dayTitle.textContent=day;
    card.appendChild(dayTitle);

    const menuText=document.createElement("div"); menuText.className="menuText"; menuText.textContent=weekMenus[day]||"No data";
    card.appendChild(menuText);

    // Labels
    const labelSpan=document.createElement("span"); 
    const dayIndex=["Monday","Tuesday","Wednesday","Thursday","Friday"].indexOf(day);
    const dayDate=new Date(today); dayDate.setDate(today.getDate() - today.getDay() + 1 + dayIndex);
    if(dayDate.toDateString()===today.toDateString()) labelSpan.textContent="Today",labelSpan.className="dayLabel today";
    else if(dayDate.toDateString()===tomorrow.toDateString()) labelSpan.textContent="Tomorrow",labelSpan.className="dayLabel tomorrow";
    card.appendChild(labelSpan);

    // Toggle
    const toggle=document.createElement("label"); toggle.className="toggle";
    const input=document.createElement("input"); input.type="checkbox";
    input.checked = packedLunches[week] && packedLunches[week][day];
    const slider=document.createElement("span"); slider.className="slider";
    toggle.appendChild(input); toggle.appendChild(slider);
    card.appendChild(toggle);

    input.addEventListener("change",()=>{
      if(!packedLunches[week]) packedLunches[week]={};
      if(input.checked) packedLunches[week][day]=true;
      else delete packedLunches[week][day];
      localStorage.setItem('packedLunches',JSON.stringify(packedLunches));
      renderMenu(week);
    });

    menuContainer.appendChild(card);
  }

  // Update week info
  weekNumberEl.textContent=week;
  const weekStartDate = new Date(termStart); weekStartDate.setDate(termStart.getDate() + (week-1)*7);
  weekCommenceEl.textContent = weekStartDate.toLocaleDateString('en-GB',{day:'numeric',month:'short',year:'numeric'});

  // Update packed meals this week
  packedWeekEl.textContent = `Packed Meals This Week: ${packedLunches[week]?Object.keys(packedLunches[week]).length:0}`;
}

// Navigation buttons
const weekNavDiv = document.getElementById('weekNav');
const nextWeekBtn=document.createElement("button"); nextWeekBtn.className="btn"; nextWeekBtn.textContent="View Next Week";
weekNavDiv.appendChild(nextWeekBtn);
const returnBtn=document.createElement("button"); returnBtn.className="btn secondary"; returnBtn.textContent="Return to Current Week"; returnBtn.style.display="none"; weekNavDiv.appendChild(returnBtn);

nextWeekBtn.addEventListener("click",()=>{
  let next = currentWeek+1;
  const totalWeeks = Math.ceil((termEnd - termStart)/(1000*60*60*24*7));
  if(next > totalWeeks) return;
  renderMenu(next);
  nextWeekBtn.style.display="none";
  returnBtn.style.display="block";
});

returnBtn.addEventListener("click",()=>{
  renderMenu(currentWeek);
  nextWeekBtn.style.display="block";
  returnBtn.style.display="none";
});

// Initial render
renderMenu(currentWeek);
</script>
</body>
</html>
