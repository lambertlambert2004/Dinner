<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>School Dinner Menu â€” Swansea 2025</title>
<link rel="apple-touch-icon" sizes="180x180" href="https://lambertlambert2004.github.io/Dinner/icon-180.PNG">

<style>
body {
  font-family: -apple-system, BlinkMacSystemFont, "SF Pro Text","Segoe UI", Roboto, Helvetica, Arial, sans-serif;
  margin:0; padding:20px; background:#f2f2f7; color:#1c1c1e;
}
h1 { 
  text-align:center; font-weight:800; font-size:2rem; margin:0 0 4px;
  letter-spacing:0.5px;
}
h1::after {
  content:""; display:block; margin:8px auto 0; width:60px; height:2px; background:#d1d1d6; border-radius:1px;
}

/* Week label with shimmering gradient */
.week-label { 
  text-align:center; 
  font-size:0.85rem; 
  color:#1c1c1e;
  margin-bottom:20px; 
  letter-spacing:0.5px;
  font-weight:600;
  background: linear-gradient(90deg, rgba(0,122,255,0.15), rgba(142,142,147,0.15), rgba(0,122,255,0.15));
  padding:4px 12px; 
  border-radius:12px;
  display:inline-block;
  background-size:200% 100%;
  animation: shimmer 4s linear infinite;
}
@keyframes shimmer {
  0% { background-position:200% 0; }
  100% { background-position:-200% 0; }
}

#menuCards { display:flex; flex-direction:column; gap:18px; }
.card {
  background:linear-gradient(145deg,#ffffff,#f9f9f9);
  padding:18px 22px; border-radius:20px;
  box-shadow:0 4px 12px rgba(0,0,0,0.08);
  position:relative; display:flex; flex-direction:column;
  opacity:0; transform:translateY(20px) scale(0.98);
  transition:all 0.3s ease, transform 0.3s ease, opacity 0.5s ease;
}
.card.packed { background:linear-gradient(145deg,#fff9d6,#fff4b2); }
.card.other-day { background:linear-gradient(145deg,#e6fff2,#dfffe0); }
.card.tomorrow { border:3px solid #ffb3b3; }
.card:hover, .card:active { transform: scale(1.02); box-shadow:0 6px 16px rgba(0,0,0,0.12); }

.card h2 { margin:0 0 12px; font-size:1.4rem; font-weight:600; }
.menu { white-space:pre-line; margin-bottom:15px; font-size:1rem; line-height:1.6; color:#333; }
.label { position:absolute; top:12px; right:18px; font-size:0.75rem; font-weight:600;
  color:#fff; padding:4px 8px; border-radius:12px; z-index:1; }
.label.today { background:#007aff; }
.label.tomorrow { background:#ff3b30; }
.label.menu-end { background:#8e8e93; }
.toggle { position:relative; display:inline-block; width:60px; height:34px; margin-top:auto; }
.toggle input { opacity:0; width:0; height:0; }
.slider { position:absolute; cursor:pointer; top:0; left:0; right:0; bottom:0; background-color:#ccc; transition:.4s; border-radius:34px; }
.slider:before { position:absolute; content:""; height:26px; width:26px; left:4px; bottom:4px; background-color:white; transition:.2s; border-radius:50%; }
input:checked + .slider { background-color:#34c759; }
input:checked + .slider:before { transform:translateX(26px); }

footer { margin-top:28px; text-align:center; font-size:.85rem; color:#8e8e93; }
</style>
</head>
<body>
<h1>School Dinner Menu</h1>
<div class="week-label" id="weekLabel"></div>
<div id="menuCards"></div>
<footer>Baked salmon available every Friday as an alternative. Data last updated per Swansea Council 2025.</footer>

<script>
// Week definitions
const weekMap = [
  { week: 1, dates: ['2025-09-01','2025-09-22','2025-10-13','2025-11-10','2025-12-01'] },
  { week: 2, dates: ['2025-09-08','2025-09-29','2025-10-20','2025-11-17','2025-12-08'] },
  { week: 3, dates: ['2025-09-15','2025-10-06','2025-11-03','2025-11-24','2025-12-15'] }
];

// Menus
const MENUS_BY_WEEK = {
  1: { Monday:"Oven baked sausages / Vegetarian sausage\nAccompaniments\nBiscuit / fruit", Tuesday:"BBQ chicken wrap / Cheese pizza\nAccompaniments\nYoghurt / fruit", Wednesday:"Cheesy beany jacket / Breaded chicken\nAccompaniments\nPancake / fruit", Thursday:"Cottage pie / Tomato pasta bake\nAccompaniments\nCookie / fruit", Friday:"Baked fish / Cheese wrap\nAccompaniments\nJam split / fruit" },
  2: { Monday:"Breaded chicken / Veg cheese bake\nAccompaniments\nYoghurt / fruit", Tuesday:"Pasta bolognese / Omelette\nAccompaniments\nJelly / fruit", Wednesday:"Chicken curry / Cheese pizza\nAccompaniments\nMuffin / fruit", Thursday:"Roast chicken / Pasta Napolitana\nAccompaniments\nCookie / fruit", Friday:"Fish fingers / Cheese wrap\nAccompaniments\nWelsh cake / fruit" },
  3: { Monday:"Meatballs / Tomato pasta bake\nAccompaniments\nJam split / fruit", Tuesday:"Chicken curry / Margherita pizza\nAccompaniments\nYoghurt / fruit", Wednesday:"Cheese calzone / Breaded chicken\nAccompaniments\nJelly / fruit", Thursday:"Roast turkey / Macaroni cheese\nAccompaniments\nCookie / fruit", Friday:"Baked fish / Cheese wrap\nAccompaniments\nMuffin / fruit" }
};

// Determine current week
function getCurrentWeek() {
  const today = new Date();
  for (const w of weekMap) {
    for (const d of w.dates) {
      const start = new Date(d);
      const end = new Date(start); end.setDate(end.getDate()+6);
      if(today>=start && today<=end) return w.week;
    }
  }
  return 1;
}
const currentWeek=getCurrentWeek();
document.getElementById("weekLabel").textContent=`Week ${currentWeek}`;

// Today & Tomorrow
const weekdays=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];
const todayName=weekdays[new Date().getDay()];
let tomorrow=new Date(); tomorrow.setDate(tomorrow.getDate()+1);
if(tomorrow.getDay()===6) tomorrow.setDate(tomorrow.getDate()+2);
if(tomorrow.getDay()===0) tomorrow.setDate(tomorrow.getDate()+1);
const tomorrowName=weekdays[tomorrow.getDay()];

// Load packed lunch per week
let allPackedLunch=JSON.parse(localStorage.getItem('packedLunch')||'{}');
if(!allPackedLunch[currentWeek]) allPackedLunch[currentWeek]={};
let packedLunch=allPackedLunch[currentWeek];

const container=document.getElementById("menuCards");
const MENUS=MENUS_BY_WEEK[currentWeek];

["Monday","Tuesday","Wednesday","Thursday","Friday"].forEach((day,index)=>{
  const card=document.createElement("div");
  card.classList.add("card", packedLunch[day]?"packed":"other-day");
  if(day===tomorrowName) card.classList.add("tomorrow");

  const h2=document.createElement("h2"); h2.textContent=day; card.appendChild(h2);

  const menuDiv=document.createElement("div"); menuDiv.classList.add("menu"); menuDiv.textContent=MENUS[day]||"No data";

  const labelSpan=document.createElement("span");
  if(day===todayName) labelSpan.textContent="Today",labelSpan.classList.add("label","today");
  else if(day===tomorrowName) labelSpan.textContent="Tomorrow",labelSpan.classList.add("label","tomorrow");
  menuDiv.appendChild(labelSpan);

  if(currentWeek===3){ const endLabel=document.createElement("span"); endLabel.textContent="Menu Ends"; endLabel.classList.add("label","menu-end"); endLabel.style.top="35px"; endLabel.style.right="18px"; card.appendChild(endLabel); }

  card.appendChild(menuDiv);

  // Toggle
  const label=document.createElement("label"); label.classList.add("toggle");
  const input=document.createElement("input"); input.type="checkbox"; input.checked=!!packedLunch[day];
  const slider=document.createElement("span"); slider.classList.add("slider");
  label.appendChild(input); label.appendChild(slider); card.appendChild(label);

  input.addEventListener("change",()=>{ 
    const isChecked=input.checked;
    if(!confirm(`Are you sure you want to ${isChecked?"add":"remove"} packed lunch for ${day}?`)){input.checked=!isChecked; return;}
    if(isChecked){ card.classList.remove("other-day"); card.classList.add("packed"); packedLunch[day]=true; }
    else { card.classList.remove("packed"); card.classList.add("other-day"); delete packedLunch[day]; }
    allPackedLunch[currentWeek]=packedLunch;
    localStorage.setItem('packedLunch',JSON.stringify(allPackedLunch));
  });

  container.appendChild(card);

  // Staggered fade-in animation
  setTimeout(()=>{ card.style.opacity=1; card.style.transform="translateY(0) scale(1)"; }, index*150);

  // Highlight today card
  if(day===todayName){ card.style.transition="0.5s"; card.style.boxShadow="0 0 24px 3px #007aff"; setTimeout(()=>{card.style.boxShadow="0 4px 12px rgba(0,0,0,0.08)";},1500); }
});

// Scroll to today
const todayCard=Array.from(document.querySelectorAll(".card")).find(c=>c.querySelector(".label.today"));
if(todayCard) todayCard.scrollIntoView({behavior:"smooth", block:"center"});
</script>
</body>
</html>
